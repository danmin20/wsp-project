{% load static %}
<!DOCTYPE html>
<html>

<head>
    <title>My Movie</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link href='//fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="{% static 'css/blog.css' %}">
</head>

<body>
    <div class="page-header">
        {% if user.is_authenticated %}
        <a href="{% url 'post_new' %}" class="top-menu"><span class="glyphicon glyphicon-plus"></span></a>
        {% endif %}
        <h1><a href="/">My Movie</a></h1>
    </div>
    <div class="content container">
        <div id="movies"></div>
        <div class="row">
            <div class="col-md-8">
                {% block content %}
                {% endblock %}
            </div>
        </div>
    </div>
    <script>
        const url = "https://yts-proxy.now.sh/list_movies.json";

        fetch(url, {
            method: 'GET',
            mode: 'cors',
            credentials: 'same-origin'
        }).then((res) => {
            return res.json()
        }).then((json) => {
            console.log(json.data.movies)
            const movies = document.getElementById('movies')
            json.data.movies.forEach((movie) => {
                const movieCard = document.createElement('div')
                const title = document.createTextNode(movie.title)
                movieCard.appendChild(title)
                movies.appendChild(movieCard)
            })

        })
    </script>
</body>

</html>